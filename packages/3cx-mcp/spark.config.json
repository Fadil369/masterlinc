{
  "name": "3CX MCP Server",
  "description": "Model Context Protocol server for 3CX Cloud PBX with AI orchestration",
  "version": "1.0.0",
  "runtime": "node:22",
  "services": [
    {
      "name": "3cx-mcp-server",
      "type": "mcp",
      "port": 3000,
      "healthCheck": "/health",
      "environment": {
        "NODE_ENV": "production",
        "PBX_FQDN": "${PBX_FQDN}",
        "PBX_USERNAME": "${PBX_USERNAME}",
        "PBX_PASSWORD": "${PBX_PASSWORD}",
        "PBX_DEFAULT_EXTENSION": "${PBX_DEFAULT_EXTENSION}",
        "ANTHROPIC_API_KEY": "${ANTHROPIC_API_KEY}",
        "OPENAI_API_KEY": "${OPENAI_API_KEY}",
        "MASTERLINC_BASE_URL": "${MASTERLINC_BASE_URL}"
      },
      "build": {
        "command": "npm run build",
        "output": "dist"
      },
      "start": {
        "command": "node dist/index.js"
      }
    },
    {
      "name": "3cx-web-interface",
      "type": "web",
      "port": 3001,
      "healthCheck": "/",
      "routes": [
        {
          "path": "/",
          "type": "spa"
        },
        {
          "path": "/api/*",
          "proxy": "http://3cx-mcp-server:3000"
        }
      ]
    },
    {
      "name": "prometheus",
      "type": "monitoring",
      "port": 9090,
      "config": "prometheus.yml"
    },
    {
      "name": "grafana",
      "type": "visualization",
      "port": 3002,
      "dependencies": ["prometheus"]
    }
  ],
  "database": {
    "type": "redis",
    "version": "7",
    "persistence": true
  },
  "secrets": [
    "PBX_FQDN",
    "PBX_USERNAME",
    "PBX_PASSWORD",
    "PBX_DEFAULT_EXTENSION",
    "ANTHROPIC_API_KEY",
    "OPENAI_API_KEY",
    "MASTERLINC_BASE_URL"
  ],
  "deployment": {
    "strategy": "rolling",
    "replicas": 2,
    "autoscaling": {
      "enabled": true,
      "minReplicas": 1,
      "maxReplicas": 5,
      "targetCPU": 70
    }
  }
}
